<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Generator - PWA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }
        
        .upload-section {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-section:hover {
            background: #f8f9ff;
            border-color: #764ba2;
        }
        
        .upload-section.dragover {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        
        .upload-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        #fileInput {
            display: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .preview-section {
            display: none;
            margin-top: 40px;
        }
        
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .preview-item {
            text-align: center;
        }
        
        .preview-item img {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }
        
        .preview-item .size {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }
        
        .download-all {
            text-align: center;
            margin-top: 30px;
        }
        
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        code {
            background: #f5f5f5;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: monospace;
            color: #d63384;
        }
        
        .step {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #667eea;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® PWA Icon Generator</h1>
        <p class="subtitle">Upload logo Anda dan generate semua ukuran icon untuk PWA</p>
        
        <div class="info-box">
            <strong>üìå Rekomendasi Logo:</strong>
            <ul style="margin-top: 10px; margin-left: 20px;">
                <li>Format: PNG, JPG, atau SVG</li>
                <li>Ukuran minimal: 512x512 pixels</li>
                <li>Background: Transparan (PNG) atau solid color</li>
                <li>Bentuk: Square (rasio 1:1)</li>
            </ul>
        </div>
        
        <!-- Upload Section -->
        <div class="upload-section" id="uploadSection">
            <div class="upload-icon">üìÅ</div>
            <h3>Upload Logo Anda</h3>
            <p style="margin: 15px 0;">Drag & drop logo atau klik untuk browse</p>
            <button class="btn" onclick="document.getElementById('fileInput').click()">
                Browse File
            </button>
            <input type="file" id="fileInput" accept="image/*">
        </div>
        
        <!-- Preview Section -->
        <div class="preview-section" id="previewSection">
            <h2 style="color: #667eea; margin-bottom: 20px;">Preview Icons</h2>
            
            <div class="preview-grid" id="previewGrid"></div>
            
            <div class="download-all">
                <button class="btn" id="downloadAllBtn" onclick="downloadAll()">
                    üì• Download All Icons
                </button>
            </div>
            
            <div class="success-box" style="margin-top: 30px;">
                <strong>‚úÖ Next Steps:</strong>
                <ol style="margin-top: 10px; margin-left: 20px;">
                    <li>Download semua icon</li>
                    <li>Copy ke folder <code>assets/images/</code></li>
                    <li>Icon sudah otomatis terlink di manifest.json</li>
                    <li>Refresh aplikasi untuk lihat perubahan</li>
                </ol>
            </div>
        </div>
        
        <!-- Instructions -->
        <div style="margin-top: 50px;">
            <h2 style="color: #667eea; margin-bottom: 20px;">üìñ Cara Manual (Tanpa Tool)</h2>
            
            <div class="step">
                <span class="step-number">1</span>
                <strong>Buka Online Icon Generator</strong>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Buka salah satu website ini:
                </p>
                <ul style="margin-left: 60px; margin-top: 10px;">
                    <li><a href="https://www.pwabuilder.com/imageGenerator" target="_blank">PWABuilder Image Generator</a> (Recommended)</li>
                    <li><a href="https://realfavicongenerator.net/" target="_blank">RealFaviconGenerator</a></li>
                    <li><a href="https://favicon.io/" target="_blank">Favicon.io</a></li>
                </ul>
            </div>
            
            <div class="step">
                <span class="step-number">2</span>
                <strong>Upload Logo</strong>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Upload logo toko Anda (minimal 512x512px)
                </p>
            </div>
            
            <div class="step">
                <span class="step-number">3</span>
                <strong>Download Icons</strong>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Download semua ukuran icon yang dibutuhkan:
                </p>
                <ul style="margin-left: 60px; margin-top: 10px;">
                    <li>72x72</li>
                    <li>96x96</li>
                    <li>128x128</li>
                    <li>144x144</li>
                    <li>152x152</li>
                    <li>192x192</li>
                    <li>384x384</li>
                    <li>512x512</li>
                </ul>
            </div>
            
            <div class="step">
                <span class="step-number">4</span>
                <strong>Copy ke Project</strong>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Copy semua file icon ke folder: <code>sera\assets\images\</code>
                </p>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Pastikan nama file sesuai: <code>icon-72x72.png</code>, <code>icon-96x96.png</code>, dst.
                </p>
            </div>
            
            <div class="step">
                <span class="step-number">5</span>
                <strong>Test</strong>
                <p style="margin-top: 10px; margin-left: 40px;">
                    Refresh aplikasi dan check:
                </p>
                <ul style="margin-left: 60px; margin-top: 10px;">
                    <li>Icon muncul di browser tab</li>
                    <li>Icon muncul saat install app</li>
                    <li>Icon muncul di home screen</li>
                </ul>
            </div>
        </div>
        
        <div class="warning-box" style="margin-top: 30px;">
            <strong>‚ö†Ô∏è Catatan Penting:</strong>
            <ul style="margin-top: 10px; margin-left: 20px;">
                <li>Icon harus format PNG untuk transparansi terbaik</li>
                <li>Gunakan logo yang simple dan jelas di ukuran kecil</li>
                <li>Test di berbagai ukuran untuk memastikan tetap terlihat baik</li>
                <li>Jika ada error 404, check path file dan nama file</li>
            </ul>
        </div>
    </div>
    
    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        const uploadSection = document.getElementById('uploadSection');
        const previewSection = document.getElementById('previewSection');
        const previewGrid = document.getElementById('previewGrid');
        const fileInput = document.getElementById('fileInput');
        let originalImage = null;
        const generatedIcons = {};
        
        // Drag & Drop
        uploadSection.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadSection.classList.add('dragover');
        });
        
        uploadSection.addEventListener('dragleave', () => {
            uploadSection.classList.remove('dragover');
        });
        
        uploadSection.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadSection.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });
        
        // File Input
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });
        
        // Handle uploaded file
        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please upload an image file');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                originalImage = new Image();
                originalImage.onload = () => {
                    generateIcons();
                };
                originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // Generate all icon sizes
        function generateIcons() {
            previewGrid.innerHTML = '';
            
            sizes.forEach(size => {
                const canvas = document.createElement('canvas');
                canvas.width = size;
                canvas.height = size;
                
                const ctx = canvas.getContext('2d');
                
                // Draw white background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, size, size);
                
                // Draw image (centered and scaled)
                const scale = Math.min(size / originalImage.width, size / originalImage.height) * 0.8;
                const x = (size - originalImage.width * scale) / 2;
                const y = (size - originalImage.height * scale) / 2;
                
                ctx.drawImage(originalImage, x, y, originalImage.width * scale, originalImage.height * scale);
                
                // Convert to blob
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    generatedIcons[`icon-${size}x${size}.png`] = blob;
                    
                    // Add to preview
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    previewItem.innerHTML = `
                        <img src="${url}" alt="${size}x${size}">
                        <div class="size">${size}x${size}</div>
                        <button class="btn" style="margin-top: 10px; padding: 6px 12px; font-size: 12px;" onclick="downloadIcon('${size}')">
                            Download
                        </button>
                    `;
                    previewGrid.appendChild(previewItem);
                });
            });
            
            previewSection.style.display = 'block';
        }
        
        // Download single icon
        function downloadIcon(size) {
            const filename = `icon-${size}x${size}.png`;
            const blob = generatedIcons[filename];
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Download all icons as ZIP (requires JSZip library)
        async function downloadAll() {
            // Simple method: download one by one
            for (const [filename, blob] of Object.entries(generatedIcons)) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
                
                // Small delay between downloads
                await new Promise(resolve => setTimeout(resolve, 300));
            }
            
            alert('‚úÖ Semua icon berhasil didownload!\n\nNext: Copy semua file ke folder assets/images/');
        }
    </script>
</body>
</html>
